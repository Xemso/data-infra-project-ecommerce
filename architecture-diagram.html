<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protein Powerhouse - Architecture Diagram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .arrow {
            position: absolute;
            stroke: #6b7280;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
        }
        .component {
            transition: all 0.2s ease-in-out;
        }
        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .label {
            position: absolute;
            background-color: #f3f4f6;
            color: #4b5563;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 md:p-8">
    <div class="w-full max-w-7xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Protein Powerhouse</h1>
        <h2 class="text-xl text-center text-gray-600 mb-12">Data Infrastructure Architecture</h2>

        <div id="diagram-container" class="relative w-full rounded-2xl bg-white shadow-lg p-8 md:p-12 lg:p-16">
            
            <!-- SVG Definitions for Arrowheads -->
            <svg class="absolute w-0 h-0">
                <defs>
                    <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5"
                        markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                        <path d="M 0 0 L 10 5 L 0 10 z" stroke="#6b7280" fill="#6b7280" />
                    </marker>
                </defs>
            </svg>
            
            <!-- Components -->
            <div id="user" class="component absolute flex flex-col items-center p-4 bg-green-50 border border-green-200 rounded-xl shadow-md w-40 h-28 justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                <p class="font-semibold text-green-800 mt-2">User</p>
                <p class="text-xs text-green-600">Web Browser</p>
            </div>

            <div id="monitoring" class="component absolute flex flex-col items-center p-4 bg-purple-50 border border-purple-200 rounded-xl shadow-md w-40 h-28 justify-center">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                <p class="font-semibold text-purple-800 mt-2">Monitoring</p>
                <p class="text-xs text-purple-600">kubectl</p>
            </div>

            <!-- Kubernetes Cluster Boundary -->
            <div id="k8s-cluster" class="absolute border-2 border-dashed border-blue-400 rounded-2xl bg-blue-50/50">
                <p class="absolute top-2 right-4 text-sm font-bold text-blue-600">Kubernetes Cluster</p>
            </div>

            <!-- Components inside Kubernetes -->
            <div id="webapp" class="component absolute flex flex-col items-center p-4 bg-sky-50 border border-sky-200 rounded-xl shadow-md w-40 h-28 justify-center z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                <p class="font-semibold text-sky-800 mt-2">Web App</p>
                <p class="text-xs text-sky-600">(Producer)</p>
            </div>

            <div id="kafka" class="component absolute flex flex-col items-center p-4 bg-gray-50 border border-gray-300 rounded-xl shadow-md w-40 h-28 justify-center z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-700" viewBox="0 0 20 20" fill="currentColor"><path d="M10 3.5a.75.75 0 01.75.75v1.372c.315.094.622.21.914.353l1.112-.642a.75.75 0 01.97.84l-1.002 1.735c.189.263.36.541.512.83l1.523-.217a.75.75 0 01.83.97l-.643 1.113a5.525 5.525 0 010 1.824l.643 1.113a.75.75 0 01-.83.97l-1.523-.217a5.503 5.503 0 01-.512.83l1.002 1.735a.75.75 0 01-.97.84l-1.112-.642a5.503 5.503 0 01-.914.353v1.372a.75.75 0 01-1.5 0v-1.372a5.503 5.503 0 01-.914-.353l-1.112.642a.75.75 0 01-.97-.84l1.002-1.735a5.503 5.503 0 01-.512-.83l-1.523.217a.75.75 0 01-.83-.97l.643-1.113a5.525 5.525 0 010-1.824l-.643-1.113a.75.75 0 01.83-.97l1.523.217c.152-.289.323-.567.512-.83L3.28 5.462a.75.75 0 01.97-.84l1.112.642c.292-.143.599-.26.914-.353V4.25A.75.75 0 0110 3.5zM8.5 10a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0z" /></svg>
                <p class="font-semibold text-gray-800 mt-2">Apache Kafka</p>
                <p class="text-xs text-gray-600">Topic: 'orders'</p>
            </div>

            <div id="consumer" class="component absolute flex flex-col items-center p-4 bg-orange-50 border border-orange-200 rounded-xl shadow-md w-40 h-28 justify-center z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M12 6V3m0 18v-3M5.636 5.636l-1.414-1.414M19.778 19.778l-1.414-1.414M18.364 5.636l-1.414 1.414M4.222 19.778l1.414-1.414M12 12a6 6 0 110-12 6 6 0 010 12z" /></svg>
                <p class="font-semibold text-orange-800 mt-2">Processing</p>
                <p class="text-xs text-orange-600">(Consumer)</p>
            </div>

            <div id="report" class="component absolute flex flex-col items-center p-4 bg-indigo-50 border border-indigo-200 rounded-xl shadow-md w-40 h-28 justify-center z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                <p class="font-semibold text-indigo-800 mt-2">Sales Report</p>
                <p class="text-xs text-indigo-600">.txt File</p>
            </div>
            
        </div>
    </div>

    <script>
        // This script dynamically draws the arrows to connect the components
        function drawArrows() {
            const container = document.getElementById('diagram-container');
            container.querySelectorAll('.arrow-line').forEach(el => el.remove()); // Clear old arrows
            container.querySelectorAll('.arrow-label').forEach(el => el.remove());

            const connections = [
                { from: 'user', to: 'webapp', label: 'HTTP Request' },
                { from: 'webapp', to: 'kafka', label: 'Produce Event' },
                { from: 'kafka', to: 'consumer', label: 'Consume Event' },
                { from: 'consumer', to: 'report', label: 'Write Report' },
                { from: 'monitoring', to: 'k8s-cluster', label: 'Observe' },
            ];

            connections.forEach(conn => {
                const fromEl = document.getElementById(conn.from);
                const toEl = document.getElementById(conn.to);

                const fromRect = fromEl.getBoundingClientRect();
                const toRect = toEl.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();

                const startX = fromRect.left + fromRect.width / 2 - containerRect.left;
                const startY = fromRect.top + fromRect.height / 2 - containerRect.top;
                const endX = toRect.left + toRect.width / 2 - containerRect.left;
                const endY = toRect.top + toRect.height / 2 - containerRect.top;
                
                // Adjust for arrow direction
                const pad = 5;
                let finalStartX = startX, finalStartY = startY, finalEndX = endX, finalEndY = endY;

                if (startX < endX - (toRect.width/2)) { // Left to right
                    finalStartX = fromRect.right - containerRect.left + pad;
                    finalEndX = toRect.left - containerRect.left - pad;
                } else if (startX > endX + (toRect.width/2)) { // Right to left
                    finalStartX = fromRect.left - containerRect.left - pad;
                    finalEndX = toRect.right - containerRect.left + pad;
                } else if (startY < endY) { // Top to bottom
                    finalStartY = fromRect.bottom - containerRect.top + pad;
                    finalEndY = toRect.top - containerRect.top - pad;
                } else { // Bottom to top
                    finalStartY = fromRect.top - containerRect.top - pad;
                    finalEndY = toRect.bottom - containerRect.top + pad;
                }

                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('class', 'arrow-line arrow');
                path.setAttribute('d', `M${finalStartX},${finalStartY} L${finalEndX},${finalEndY}`);
                container.querySelector('svg').appendChild(path);
                
                // Add label
                const label = document.createElement('div');
                label.setAttribute('class', 'arrow-label label');
                label.innerText = conn.label;
                label.style.left = `${(finalStartX + finalEndX) / 2}px`;
                label.style.top = `${(finalStartY + finalEndY) / 2}px`;
                label.style.transform = 'translate(-50%, -50%)';
                container.appendChild(label);
            });
        }
        
        function positionElements() {
             const container = document.getElementById('diagram-container');
             const w = container.clientWidth;
             const h = container.clientHeight;

             // Positioning logic based on viewport size for responsiveness
             const isMobile = window.innerWidth < 768;

             if (isMobile) {
                // Vertical layout for mobile
                document.getElementById('user').style.cssText = `top: 2%; left: 50%; transform: translateX(-50%);`;
                document.getElementById('k8s-cluster').style.cssText = `top: 150px; left: 5%; width: 90%; height: 600px;`;
                document.getElementById('webapp').style.cssText = `top: 200px; left: 50%; transform: translateX(-50%);`;
                document.getElementById('kafka').style.cssText = `top: 350px; left: 50%; transform: translateX(-50%);`;
                document.getElementById('consumer').style.cssText = `top: 500px; left: 50%; transform: translateX(-50%);`;
                document.getElementById('report').style.cssText = `top: 650px; left: 50%; transform: translateX(-50%);`;
                document.getElementById('monitoring').style.cssText = `top: 800px; left: 50%; transform: translateX(-50%);`;
                container.style.height = '1000px';

             } else {
                 // Horizontal layout for desktop
                const yCenter = h * 0.5;
                document.getElementById('user').style.cssText = `top: ${yCenter}px; left: 2%; transform: translateY(-50%);`;
                document.getElementById('k8s-cluster').style.cssText = `top: 5%; left: 20%; width: 78%; height: 90%;`;
                document.getElementById('webapp').style.cssText = `top: ${yCenter}px; left: 25%; transform: translateY(-50%);`;
                document.getElementById('kafka').style.cssText = `top: ${yCenter}px; left: 45%; transform: translateY(-50%);`;
                document.getElementById('consumer').style.cssText = `top: ${yCenter}px; left: 65%; transform: translateY(-50%);`;
                document.getElementById('report').style.cssText = `top: ${yCenter}px; left: 85%; transform: translateY(-50%);`;
                document.getElementById('monitoring').style.cssText = `top: 5%; left: 50%; transform: translateX(-50%);`;
             }

             drawArrows();
        }

        window.onload = positionElements;
        window.onresize = positionElements;

    </script>
</body>
</html>